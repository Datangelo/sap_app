{% extends "base.html" %}

{% block title %}AWS Tool{% endblock %}

{% block content %}
<h2>AWS Tool</h2>

<form method="POST">
  <label for="country">Country:</label>
  <select name="country" id="country" required>
    <option value="">-- Select --</option>
    <option value="BE">Belgium (BE)</option>
    <option value="AT">Austria (AT)</option>
    <option value="ES">Spain (ES)</option>
    <!-- add more -->
  </select>
  <br><br>

  <label for="start_date">Start Date:</label>
  <input type="date" name="start_date" required>
  <br><br>

  <label for="end_date">End Date:</label>
  <input type="date" name="end_date" required>
  <br><br>

  <button type="submit">Run Tool</button>
</form>

{% if result %}
  <h3>Result:</h3>
  {% if result.error %}
    <p style="color:red;">Error: {{ result.error }}</p>
  {% else %}
    <!-- Show summary info -->
    <p>Period: {{ result.final_df_message }}</p>
    <p>Country: {{ result.country }}</p>
    <p>Seller Cost (sum): {{ result.seller_sum }}</p>
    <p>Customer Cost (sum): {{ result.customer_sum }}</p>

    <!-- Download Button -->
    <form action="{{ url_for('download_csv') }}" method="get">
      <button type="submit">Download Full CSV</button>
    </form>
  {% endif %}
{% endif %}
{% endblock %}
